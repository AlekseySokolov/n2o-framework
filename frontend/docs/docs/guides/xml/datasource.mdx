---
title: Источники данных
description: ""
---

import {Sandbox} from '../../../src/components/Sandbox/Sandbox'

## Виды источников данных {#datasources}

### &lt;datasource&gt; {#datasource}

Стандартный источник данных

**Атрибуты**

|Наименование        |Тип                    |Описание                                                              |Значение по умолчанию |
|--------------------|-----------------------|----------------------------------------------------------------------|----------------------|
|id                  |Строка                 |Идентификатор источника данных                                        |                      |
|query-id            |Строка                 |Идентификатор выборки, на основе которой происходит получение данных  |                      |
|object-id           |Строка                 |Идентификатор объекта                                                 |                      |
|default-values-mode |defaults, query, merge |Подстановка значений по умолчанию.<br/>defaults - значения по умолчанию заполняются данными прописанными в полях<br/>query - значения по умолчанию заполняются данными из запроса<br/>merge - значения по умолчанию заполняются путем мержа данных прописанных в полях и полученных из запроса(полученные из запроса в приоритете), id игнорируется |query|
|size                |Число                  |Размер выборки                                                        |10                    |
|route               |Строка                 |URL получения данных                                                  |true                  |

**Тело**

[Предустановленная фильтрация](../xml/base#pre-filters) <br/>
[Отправка полей на сервер при их изменении](../xml/action#submit) <br/>
[Зависимости источника данных](#dependencies)

**Пример**

```xml
<datasource id="ds1">
  <filters>
    <eq field-id="id" value="{id}"/>
    ...
  </filters>
  <submit>
    ...
  </submit>
  <dependencies>
    <fetch on="ds2"/>
    ...
  </dependencies>
</datasource>
```

### &lt;stomp-datasource&gt; {#stomp-datasource}

STOMP-источник данных

**Атрибуты**

|Наименование |Тип            |Описание                                                 |
|-------------|---------------|---------------------------------------------------------|
|id           |Строка         |Идентификатор источника данных                           |
|destination  |Строка         |Место назначения                                         |

**Тело**

[Значения на момент инициализации](#stomp_init_values)

#### &lt;values&gt; {#stomp_init_values}

Значения на момент инициализации

**Тело**

[Инициализирующее значение](#stomp_init_value)

#### &lt;value&gt; {#stomp_init_value}

Инициализирующее значение (имя атрибута задается пользователем)

**Пример**

```xml
<?xml version='1.0' encoding='UTF-8'?>
<application xmlns="http://n2oapp.net/framework/config/schema/application-3.0">
    <datasources>
        <stomp-datasource id="notifCountDs" destination="/notif/count">
            <values>
                <value count="0"/>
            </values>
        </stomp-datasource>
    </datasources>
</application>
```

### &lt;app-datasource&gt; {#app-datasource}

Источник данных, ссылающийся на источник из application.xml

**Атрибуты**

|Наименование        |Тип                    |Описание                                                              |
|--------------------|-----------------------|----------------------------------------------------------------------|
|id                  |Строка                 |Идентификатор источника данных из application.xml                     |

**Пример**

```xml
<app-datasource id="app_ds"/>
```

### &lt;browser-storage&gt; {#browser-storage}

Источник, хранящий данные в браузере

**Атрибуты**

|Наименование        |Тип                    |Описание                                                              |Значение по умолчанию              |
|--------------------|-----------------------|----------------------------------------------------------------------|-----------------------------------|
|id                  |Строка                 |Идентификатор источника данных                                        |                                   |
|key                 |Строка                 |Ключ, под которым будут хранится данные                               |Глобальный идентификатор источника |
|type                |Строка                 |Тип хранилища в браузере                                              |sessionStorage                     |
|size                |Число                  |Размер выборки                                                        |10                                 |

**Тело**

[Сохранение данных](#browser_storage_submit) <br/>
[Зависимости источника данных](#dependencies)

#### &lt;submit&gt; {#browser_storage_submit}

Сохранение данных

**Атрибуты**

|Наименование        |Тип                            |Описание                                                              |Значение по умолчанию   |
|--------------------|-------------------------------|----------------------------------------------------------------------|------------------------|
|key                 |Строка                         |Ключ, под которым будут записываться данные                           |Ключ источника данных   |
|type                |Строка                         |Тип хранилища браузера, в которое будут записываться данные           |Хранилище источника     |
|auto                |true false                     |Автоматически ли записывать в хранилище при изменении данных?         |true                    |
|model               |filter,resolve,edit,datasource |Модель текущего источника данных, которая будет сохранена             |resolve                 |

**Пример**

```xml
<browser-storage id="ds" key="store" type="localStorage">
    <submit type="localStorage" auto="false" key="store" model="filter"/>
    <dependencies>
        <fetch on="ds2"/>
        ...
    </dependencies>
</browser-storage>
```

### &lt;inherited-datasource&gt; {#inherited-datasource}

Источник, получающий данные из другого источника

**Атрибуты**

|Наименование        |Тип                           |Описание                                                              |Значение по умолчанию              |
|--------------------|------------------------------|----------------------------------------------------------------------|-----------------------------------|
|id                  |Строка                        |Идентификатор источника данных                                        |                                   |
|source-datasource   |Строка                        |Идентификатор источника данных, из которого будут скопированы данные  |                                   |
|source-model        |filter resolve edit datasource|Модель источника данных, из которой будут скопированы данные          |parent                             |
|target-field-id     |Строка                        |Идентификатор поля, из которого будут скопированы данные              |Вся модель                         |
|size                |Число                         |Размер выборки                                                        |10                                 |

**Тело**

[Сохранение данных](#inherited_datasource_submit) <br/>
[Зависимости источника данных](#dependencies)

#### &lt;submit&gt; {#inherited_datasource_submit}

Сохранение данных

**Атрибуты**

|Наименование        |Тип                           |Описание                                                              |Значение по умолчанию   |
|--------------------|------------------------------|----------------------------------------------------------------------|------------------------|
|model               |filter,resolve,edit,datasource|Модель текущего источника данных, которая будет сохранена             |resolve                 |
|auto                |true false                    |Автоматически ли записывать при изменении данных?                     |true                    |
|target-datasource   |Строка                        |Идентификатор источника данных, в который производится сохранение     |                        |
|target-model        |filter,resolve,edit,datasource|Модель источника данных, в которую производится сохранение            |resolve                 |
|target-field-id     |Строка                        |Идентификатор поля, в которое производится сохранение                 |Вся модель              |

**Пример**

```xml
<datasources>
  <inherited-datasource id="ds" source-datasource="app-ds">
    <submit target-model="false" target-field-id="name"/>
    <dependencies>
      <fetch on="ds2"/>
      ...
    </dependencies>
  </inherited-datasource>
</datasources>
```

### &lt;parent-datasource&gt; {#parent-datasource}

Источник, ссылающийся на источник из родительской страницы

**Атрибуты**

|Наименование        |Тип                           |Описание                                                              |
|--------------------|------------------------------|----------------------------------------------------------------------|
|id                  |Строка                        |Идентификатор источника данных родительской страницы                  |

**Пример**

```xml
<datasources>
    <parent-datasource id="ds"/>
</datasources>
```

## Зависимости источника данных {#dependencies}

### &lt;fetch&gt; {#fetch_dependency}

Обновление данных при изменении зависимых источников данных

**Атрибуты**

|Наименование|Тип                             |Описание                          |Значение по умолчанию|
|------------|--------------------------------|----------------------------------|---------------------|
|on          |Строка                          |Идентификатор источника данных    |                     |
|model       |filter,resolve,edit,datasource  |Модель источника данных           |resolve              |

**Пример**

```xml
<dependencies>
    <fetch on="ds" model="filter"/>
</dependencies>
```

### &lt;copy&gt; {#copy_dependency}

Копирование части модели из другого источника

**Атрибуты**

|Наименование       |Тип                             |Описание                                                                  |Значение по умолчанию|
|-------------------|--------------------------------|--------------------------------------------------------------------------|---------------------|
|on                 |Строка                          |Идентификатор источника данных, из которого копируются данные             |                     |
|source-model       |filter,resolve,edit,datasource  |Модель источника данных, из которой будут скопированы данные              |resolve              |
|target-model       |filter,resolve,edit,datasource  |Модель текущего источника, в которую будут скопированы данные             |resolve              |
|source-field-id    |Строка                          |Идентификатор поля, из которого будут скопированы данные                  |Вся модель           |
|target-field-id    |Строка                          |Идентификатор поля текущего источника, в которое будут скопированы данные |Вся модель           |
|submit             |true false                      |Вызов сохранения данных сразу после копирования                           |false                |
|apply-on-init      |true false                      |Срабатывание копирования при инициализации источника данных               |false                |

**Пример**

```xml
<dependencies>
    <copy on="ds" source-model="resolve" target-model="filter" source-field-id="name" target-field-id="name"/>
</dependencies>
```
